<?xml version="1.0" encoding="UTF-8"?>
<NChecks xmlns="http://schemas.sysmo.io/2015/NChecks">
    <Check
        Id="CheckHTTP"
        AttribUrl="www.sysmo.io"
        UpdatesUrl="www.sysmo.io/nchecks/updates/CheckHTTP/"
        Type="simple"
        Class="io.sysmo.nchecks.modules.CheckViaJRuby" >
        <Author><![CDATA[Sebastien Serre <ssbx@sysmo.io>]]></Author>
        <Description>Check HTTP service availability on the specified host.</Description>
        <Overview></Overview>
        <FlagTable>
            <Flag
                Id="host"
                AutoFill="host"
                Role="mandatory"
                Type="string" >
                <Default></Default>
                <Hint>Hostname or IP</Hint>
                <Usage>Host target as ip version 4/6 or hostname</Usage>
            </Flag>
            <Flag
                Id="port"
                Minimum="1"
                Maximum="65535"
                Role="mandatory"
                Type="integer" >
                <Default>8080</Default>
                <Hint>IP protocol port</Hint>
                <Usage>HTTP port number to query</Usage>
            </Flag>
            <Flag
                Id="ms_timeout"
                Minimum="0"
                Maximum="60000"
                Role="mandatory"
                Type="integer" >
                <Default>5000</Default>
                <Hint>Milliseconds</Hint>
                <Usage>Abort connection if it exceed the value.</Usage>
            </Flag>
        </FlagTable>
        <Performances Type="simple">
            <FileName>CheckHTTP.rrd</FileName>
            <DataSourceTable>
                <DataSource Id="ReplyDuration" Type="GAUGE" />
            </DataSourceTable>
            <GraphTable>
                <Graph
                    Id="HTTPLatency"
                    Minimum="0"
                    Maximum="undefined"
                    Rigid="false"
                    Base="1000"
                    Unit="ms"
                    UnitExponent="0" >
                    <Title>HTTP Performances</Title>
                    <VerticalLabel>"Milliseconds"</VerticalLabel>
                    <Draw
                        Type="line"
                        DataSource="ReplyDuration"
                        Consolidation="MAX"
                        Color="#729FCFFF" >
                        Maximum reply latency"
                    </Draw>
                    <Draw
                        Type="line"
                        DataSource="ReplyDuration"
                        Consolidation="MAX"
                        Color="#204A87FF" >
                        Average reply latency"
                    </Draw>
                    <Draw
                        Type="line"
                        DataSource="ReplyDuration"
                        Consolidation="MAX"
                        Color="#3665A4FF" >
                        Minimum reply latency"
                    </Draw>
                </Graph>
            </GraphTable>
        </Performances>
    </Check>
</NChecks>
