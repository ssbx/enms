{deps, [
    {supercast, ".*",
        {git, "https://github.com/supercastframework/supercast.git", {branch,master}}}
]}.

%% relx default release
{relx,
    [
        {release, {sysmo, "0.1.0"},
              [sysmo, sasl, asn1, crypto, kernel, mnesia,
                  public_key, ssl, xmerl]
        },
        {dev_mode, false},
        {include_erts, true},
        {sys_config, "./config/app.config"},
        {vm_args, "./config/vm.args"},
        {extended_start_script, true},
        {overlay, [
            {copy,  "config/docroot", "docroot"},
            {mkdir, "docroot/sync"},
            {mkdir, "data"},
            {mkdir, "data/monitor"},
            {mkdir, "data/events"},
            {mkdir, "data/states"},
            {mkdir, "data/mnesia"},
            {mkdir, "etc"},
            {mkdir, "etc/ssl"},
            {copy, "config/users.xml", "etc/users.xml"},
            {copy, "config/ssl/gen_certificates", "etc/ssl/gen_certificates"},
            {mkdir, "java_apps"},
            {copy, "apps/j_server/priv/jserver/sysmo-jserver/build/install/sysmo-jserver",
                "java_apps/sysmo-jserver"},
            {copy, "apps/j_server/priv/jserver/sysmo-jserver/sysmo.properties",
                "etc/sysmo.properties"},
            {copy, "apps/j_server/priv/jserver/shared/nchecks/nchecks-def",
                "docroot/nchecks"},
            {copy, "apps/j_server/priv/jserver/shared/nchecks/nchecks-def",
                "etc/nchecks"},
            {mkdir, "ruby"},
            {copy, "apps/j_server/priv/jserver/shared/nchecks/ruby",
                "ruby"},
            {mkdir, "utils"},
            {mkdir, "log"},
            {mkdir, "log/sasl"},
            {copy, "config/app.config", "etc/app.config"},
            {copy, "config/vm.args", "etc/vm.args"},
            {copy, "config/sysmo.cmd", "bin/sysmo.cmd"},
            {template, "config/sysmo", "bin/sysmo"},
            {template, "config/sysmo", "bin/sysmo-{{ release_version }}"}
         ]}
    ]
}.

{profiles, [
    {debug, [
        {relx, [
            {release, {sysmo, "0.1.0"},
                [sysmo, sasl, asn1, crypto, kernel, mnesia,
                    public_key, ssl, xmerl,
                        runtime_tools, wx, observer]
            },
            {dev_mode, true},
            {include_erts, false}
        ]}
    ]}
]}.
